
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Personal notes and blog">
      
      
      
        <link rel="canonical" href="https://lmjw.github.io/blog/2017-11-26-blog-docker-python-golang/">
      
      
        <link rel="prev" href="../2016-03-05-my-favourit-softwares/">
      
      
        <link rel="next" href="../2017-11-28-python-subprocess/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>An experiment using golang and python to execute command in docker - lmjw</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#description" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="lmjw" class="md-header__button md-logo" aria-label="lmjw" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            lmjw
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              An experiment using golang and python to execute command in docker
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lmjw/lmjw.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../tags/" class="md-tabs__link">
        
  
  
    
  
  Tags

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="lmjw" class="md-nav__button md-logo" aria-label="lmjw" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    lmjw
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lmjw/lmjw.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2014-3-3-Markdown-style-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2014-3-3 Markdown Style Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2016-03-05-my-favourit-softwares/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2016-03-05 My favourit softwares
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    2017-11-26 Docker, Python, Golang
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    2017-11-26 Docker, Python, Golang
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      
        Description:
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-command" class="md-nav__link">
    <span class="md-ellipsis">
      
        TEST COMMAND
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TEST COMMAND">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-setting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment setting:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failed-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failed example:
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Failed example:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#similar-issue-has-been-mentioned-in-this-docker-tutorial-and-was-explained-with-a-proposed-solution-by-will-anderson-in-his-blog" class="md-nav__link">
    <span class="md-ellipsis">
      
        Similar issue has been mentioned in this docker tutorial and was explained with a proposed solution by Will Anderson in his blog.
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ideal-successful-case" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ideal successful case
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experiment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Experiment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-summarize-the-issue" class="md-nav__link">
    <span class="md-ellipsis">
      
        To summarize the issue
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Further steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2017-11-28-python-subprocess/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2017-11-28 Python subprocess
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2017-11-30-Install-GMP-on-windows10-machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2017-11-30 Install GMP on Windows 10
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2017-12-06-Kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2017-12-06 Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2017-12-26-docker-grpc-network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2017-12-26 Docker gRPC network
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2018-01-05-OpenSSL-basic-concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2018-01-05 OpenSSL basic concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2018-01-05-python-ssl-grpc-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2018-01-05 Python SSL gRPC implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2019-06-12-Intro-to-deep-learning-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2019-06-12 Intro to deep learning notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2019-11-24-Data-Oriented-Design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2019-11-24 Data-Oriented Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2021-05-17-Notes-about-learning-OS-dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2021-05-17 Notes about learning OS dev
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OOPDesignNotes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OOP Design Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SmallLearning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Small Learning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../WindowKeyMapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Window Key Mapping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../simple-rust-protobuf-grpc-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Simple Rust protobuf gRPC guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tags
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      
        Description:
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-command" class="md-nav__link">
    <span class="md-ellipsis">
      
        TEST COMMAND
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TEST COMMAND">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-setting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment setting:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failed-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failed example:
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Failed example:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#similar-issue-has-been-mentioned-in-this-docker-tutorial-and-was-explained-with-a-proposed-solution-by-will-anderson-in-his-blog" class="md-nav__link">
    <span class="md-ellipsis">
      
        Similar issue has been mentioned in this docker tutorial and was explained with a proposed solution by Will Anderson in his blog.
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ideal-successful-case" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ideal successful case
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experiment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Experiment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#to-summarize-the-issue" class="md-nav__link">
    <span class="md-ellipsis">
      
        To summarize the issue
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Further steps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  

  <nav class="md-tags" >
    
      
      
      
      
        <span class="md-tag">bash</span>
      
    
      
      
      
      
        <span class="md-tag">docker</span>
      
    
      
      
      
      
        <span class="md-tag">golang</span>
      
    
      
      
      
      
        <span class="md-tag">python</span>
      
    
      
      
      
      
        <span class="md-tag">subprocess</span>
      
    
  </nav>


  
  


  <h1>2017-11-26 Docker, Python, Golang</h1>

<h4 id="description">Description:<a class="headerlink" href="#description" title="Permanent link">&para;</a></h4>
<p>Using golang to execute python code, which can in turn execute docker command to control docker container.</p>
<!--more-->

<hr />
<p>The overall idea is to execute some python script in golang environment using golang <code>exec</code>, and this python script contain some docker commands (bash). So the overall flow of execution is:</p>
<blockquote>
<p>[bash terminal] ===&gt; [golang.exec] ===&gt; [python.subprocess] ===&gt; [bash] ===&gt; [docker command]</p>
</blockquote>
<p>The issue occurs. </p>
<blockquote>
<p>the input device is not a TTY.  If you are using mintty, try prefixing the command with 'winpty'</p>
</blockquote>
<h4 id="test-command">TEST COMMAND<a class="headerlink" href="#test-command" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu<span class="w"> </span>bash
</code></pre></div>

<h5 id="environment-setting"><strong>Environment setting:</strong><a class="headerlink" href="#environment-setting" title="Permanent link">&para;</a></h5>
<ul>
<li>windows 10 home</li>
<li>docker toolbox</li>
<li>Git: git version 2.9.0.windows.1</li>
<li>Python: Python 3.6.3, Anaconda custom (64-bit)</li>
<li>golang: go version go1.9.2 windows/amd64</li>
</ul>
<h5 id="failed-example"><strong>Failed example</strong>:<a class="headerlink" href="#failed-example" title="Permanent link">&para;</a></h5>
<p>running under default <strong>git-bash</strong> environment in windows 10:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu<span class="w"> </span>bash
</code></pre></div>

<blockquote>
<p>&gt;&gt;&gt; the input device is not a TTY.  If you are using mintty, try prefixing the command with 'winpty'</p>
</blockquote>
<h6 id="similar-issue-has-been-mentioned-in-this-docker-tutorial-and-was-explained-with-a-proposed-solution-by-will-anderson-in-his-blog">Similar issue has been mentioned in this <a href="https://bolcom.github.io/docker-for-testers/">docker tutorial</a> and was explained with a proposed solution by <a href="http://willi.am/blog/2016/08/08/docker-for-windows-interactive-sessions-in-mintty-git-bash/">Will Anderson</a> in his blog.<a class="headerlink" href="#similar-issue-has-been-mentioned-in-this-docker-tutorial-and-was-explained-with-a-proposed-solution-by-will-anderson-in-his-blog" title="Permanent link">&para;</a></h6>
<h5 id="ideal-successful-case"><strong>Ideal successful case</strong><a class="headerlink" href="#ideal-successful-case" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="k">go</span><span class="o">-</span><span class="n">command</span><span class="p">()</span>
<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="k">go</span><span class="o">-</span><span class="n">command</span><span class="p">()</span>
<span class="w">            </span><span class="k">go</span><span class="p">.</span><span class="k">exec</span><span class="p">(</span><span class="ss">&quot;python script&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="err">#</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="n">script</span>
<span class="w">                    </span><span class="n">python</span><span class="p">.</span><span class="n">subprocess</span><span class="p">(</span><span class="ss">&quot;bash&quot;</span><span class="p">,</span><span class="ss">&quot;docker run -it ubuntu bash&quot;</span><span class="p">)</span>
</code></pre></div>

<p>The idea is by execute a command in a CLI created by golang, it will call a execution of a python script, and this python script can then subprocess execute the <code>docker run -it ubuntu bash</code> in the <strong>bash</strong> terminal.</p>
<h4 id="experiment">Experiment<a class="headerlink" href="#experiment" title="Permanent link">&para;</a></h4>
<ol>
<li>the first experiment is to get rid of "is not a tty" error and make it work in python script.  Because this command(<code>docker run -it ubuntu bash</code>) is not working in the git-bash terminal, it will never (I think) work if you open idle or any python CLI for this git-bash. So the way you open the python CLI is important.</li>
</ol>
<p>The easiest solution is to use the <strong>Docker Quickstart Terminal</strong> to open the python CLI. In the working directory, you can create a simple python subprocess function and name this file <code>pyCmd.py</code>.</p>
<p>```python
   from subprocess import Popen, PIPE, STDOUT</p>
<p>def pyDockerCmd(command):
       bash_exec = 'bash.exe'
       return Popen([bash_exec, '-c', f'{command}'], \
               stdout = PIPE, stderr = PIPE, encoding='utf-8').communicate()
   ```</p>
<p>in the command line interface (here I use Docker Quickstart terminal), you can test the result:</p>
<p><code>bash
   $ python -c "import pyCmd; print(pyCmd.pyDockerCmd('docker run -it ubuntu bash'))"</code></p>
<p>after execute, you will see something like this. </p>
<p><img alt="no response terminal" src="../image/2017-11-27-pyCmd-0.png" /></p>
<p>If you have something like this, it means at least you get rid of the "tty" error, which is annoying. </p>
<p>This "non-response" situation is actually because of the "print" command print all the response after the docker bash session end. You can try type "ls", "pwd",and "exit". Since "exit" command will quit the bash terminal, you will see all the responses after you type "exit".
   <img alt="response terminal" src="../image/2017-11-27-pyCmd-1.png" /></p>
<p>Now we know at least the python can interact with the "docker" freely without the "TTY" error. It is not perfect, we can see the responsivity is crappy. But at least we know it's working.</p>
<blockquote>
<p>[bash terminal(Docker quickstart terminal)] ~~===&gt; [golang.exec]~~ ===&gt; [python.subprocess] ===&gt; [bash] ===&gt; [docker command]</p>
</blockquote>
<ol>
<li>Now, if you wrap this python function into golang, and execute this in the <strong>Docker quickstart terminal</strong>, you will probably still see:</li>
</ol>
<blockquote>
<p>('', "the input device is not a TTY.  If you are using mintty, try prefixing the command with 'winpty'\n")</p>
</blockquote>
<p>wtf?</p>
<p>The golang function (<code>testGoPy.go</code>) is:</p>
<p>```go
   package main</p>
<p>import (
    "fmt"
    "log"
    "os/exec"
   )</p>
<p>func main() {
    out, err := exec.Command("python","-c","import pyCmd; print(pyCmd.pyDockerCmd('docker run -it ubuntu bash'))").Output()</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">nil</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">log</span>.<span class="nv">Fatal</span><span class="ss">(</span><span class="nv">err</span><span class="ss">)</span>
}
<span class="nv">fmt</span>.<span class="nv">Printf</span><span class="ss">(</span><span class="nv">string</span><span class="ss">(</span><span class="nv">out</span><span class="ss">))</span>
</code></pre></div>

<p>}
   ```</p>
<p><img alt="go terminal" src="../image/2017-11-27-pyCmd-2.png" /></p>
<p>Why is this?</p>
<p>I stuck here for a while, until I found <a href="https://stackoverflow.com/questions/30207035/golang-exec-command-read-std-input">this</a> post which is kind related to my problem. If we think this way, the command we want to execute by golang is <code>docker run -it ubuntu bash</code>, which is an interactive session, and it needs input and return output. However the golang <code>exec.Command(...).Output()</code> seems have no option of taking Stdin input. Hence, we need to modify the golang code so it can take stdin put.</p>
<p>The modified code is shown as the following.</p>
<p>```go
   package main</p>
<p>import (
    "fmt"
    "os"
    "os/exec"
   )</p>
<p>func main() {
    runCommand("python","-c","import pyCmd; print(pyCmd.pyDockerCmd('docker run -it ubuntu bash'))")
   }</p>
<p>func runCommand(cmdName string, arg ...string) {
       cmd := exec.Command(cmdName, arg...)
       cmd.Stdout = os.Stdout
       cmd.Stderr = os.Stderr
       cmd.Stdin = os.Stdin
       err := cmd.Run()
       if err != nil {
           fmt.Printf(err.Error())
           os.Exit(1)
       }
   }
   ```</p>
<div class="codehilite"><pre><span></span><code>if you compile this and execute the this code in **Docker quickstart terminal**, it will work as before. (Similar to figure1 &amp;2)
</code></pre></div>

<p><img alt="go terminal" src="../image/2017-11-27-pyCmd-3.png" /></p>
<p>Although it is not perfect, we have solved the problem of "is not a TTY".</p>
<h4 id="to-summarize-the-issue">To summarize the issue<a class="headerlink" href="#to-summarize-the-issue" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="w">  </span><span class="mf">1.</span><span class="w"> </span><span class="n">Try</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s2">&quot;Docker quickstart terminal&quot;</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="s2">&quot;git bash&quot;</span><span class="p">.</span><span class="w"> </span>
<span class="w">  </span><span class="mf">2.</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">golang</span><span class="w"> </span><span class="n n-Quoted">`</span><span class="n n-Quoted n-Quoted-Escape">``</span><span class="n n-Quoted">exec</span><span class="n n-Quoted n-Quoted-Escape">``</span><span class="n n-Quoted">`</span><span class="w"> </span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n n-Quoted">`</span><span class="n n-Quoted n-Quoted-Escape">``</span><span class="n n-Quoted">exec.Command().Output()</span><span class="n n-Quoted n-Quoted-Escape">``</span><span class="n n-Quoted">`</span><span class="w"> </span><span class="n">directly</span><span class="w"> </span><span class="k">execute</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n n-Quoted">`</span><span class="n n-Quoted n-Quoted-Escape">``</span><span class="n n-Quoted">exec.run()</span><span class="n n-Quoted n-Quoted-Escape">``</span><span class="n n-Quoted">`</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">**</span><span class="n">Stdin</span><span class="o">**</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">Stdout</span><span class="w"> </span><span class="k">before</span><span class="w"> </span><span class="k">execute</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="p">.</span>
</code></pre></div>

<p>these two steps help me to solve my problem.</p>
<h4 id="further-steps">Further steps<a class="headerlink" href="#further-steps" title="Permanent link">&para;</a></h4>
<p>I know this piece of code is imperfect and there are many things to be improved. But at least this annoying "is not a tty" problem is solved. I will further investigate the python subprocess package and try to get more understandings about it.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.top", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>